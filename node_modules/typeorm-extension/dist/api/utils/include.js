"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildFieldWithQueryAlias = exports.isFieldAllowedByIncludes = void 0;
var field_1 = require("./field");
function isFieldAllowedByIncludes(field, includes, options) {
    if (typeof includes === 'undefined') {
        return true;
    }
    options = options !== null && options !== void 0 ? options : {};
    var details = typeof field === 'string' ? field_1.getFieldDetails(field) : field;
    // check if field is associated to the default domain.
    if (typeof details.path === 'undefined' &&
        typeof details.alias === 'undefined') {
        return true;
    }
    // check if field is associated to the default domain.
    if (details.path === options.queryAlias ||
        details.alias === options.queryAlias) {
        return true;
    }
    return includes.filter(function (include) { return include.alias === details.path || include.alias === details.alias; }).length > 0;
}
exports.isFieldAllowedByIncludes = isFieldAllowedByIncludes;
function buildFieldWithQueryAlias(field, queryAlias) {
    var details = typeof field === 'string' ? field_1.getFieldDetails(field) : field;
    if (typeof details.path === 'undefined' &&
        typeof details.alias === 'undefined') {
        // try to use query alias
        return queryAlias ? queryAlias + '.' + details.name : details.name;
    }
    return details.alias + '.' + details.name;
}
exports.buildFieldWithQueryAlias = buildFieldWithQueryAlias;
//# sourceMappingURL=include.js.map